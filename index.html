<!DOCTYPE html>
<html lang="sl">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" href="favicon.ico" />

	<title>Anja</title>

	<!-- Bootstrap Core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<!-- Custom CSS -->
	<link href="css/font-awesome.min.css" rel="stylesheet">

	<link href="css/style.css" rel="stylesheet">

	<!-- Blockly editor -->
	<link href="blockly/local/editor.css" rel="stylesheet">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>

<body>

	<div id="wrapper">

		<!-- Fixed navbar -->
		<nav class="navbar navbar-default navbar-static-top">
		<div class="container-fluid">
			<div class="navbar-header">
			<a class="navbar-brand" href="index.html">Anja - Blockly Textbook Screenshot Editor</a>
			</div>
		</div>
		</nav>


		<!-- Page Content -->
		<br />
		<div id="page-content-wrapper">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-12">
<!-- Content start -->
<table width="100%">
  <tr id="tabRow" height="1em">
    <td id="tab1_blocks" class="tabon">...</td>
    <td class="tabmin">&nbsp;</td>
	<td id="tab1_python" class="taboff">Python</td>
    <td class="tabmin">&nbsp;</td>
    <td class="tabmax" align="right">
      <button type="button" class="btn btn-primary" id="runButton"><span class="fa fa-play"></span> Izvedi</button>
      <button type="button" class="btn btn-primary" id="trashButton">Počisti</button>
      <div class="btn-group" role="group" aria-label="...">
        <label class="btn btn-primary btn-file">
          <span class="fa fa-upload"></span> Naloži <input type="file" id="loadButton" accept=".blockly" style="display: none;">
        </label>
        <button type="button" class="btn btn-primary" id="saveButton"><span class="fa fa-download"></span> Shrani</button>
      </div>
    </td>
  </tr>
  <tr>
    <td colspan="5" id="content1_area"></td>
  </tr>
</table>
<table width="100%">
  <tr>
    <td style="position:relative; height:450px;">
      <div id="content1_blocks" class="content"></div>
      <pre id="content1_python" class="content"></pre>
    </td>
  </tr>
</table>
<div style="margin-top:10px"><pre id="output"></pre></div>

<xml id="toolbox" style="display: none">
  <category name="{catLogic}" colour="200">
    <block type="controls_if"></block>
    <block type="actions_ifPath"></block>
    <block type="actions_ifCondition"></block>
    <block type="logic_compare"></block>
    <block type="logic_operation"></block>
    <block type="logic_negate"></block>
    <block type="logic_boolean"></block>
    <block type="logic_null"></block>
    <block type="logic_ternary"></block>
  </category>
  <category name="{catLoops}" colour="320">
    <block type="controls_repeat">
      <value name="TIMES">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
    <block type="actions_repeatUntilImage"></block>
    <!--<block type="actions_repeatCondition"></block>-->
    <block type="controls_whileUntil"></block>
    <block type="actions_whileCondition"></block>
    <block type="controls_for">
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">0</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
      <value name="BY">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="controls_forEach"></block>
    <block type="controls_flow_statements"></block>
  </category>
  <category name="{catMath}" colour="220">
    <block type="math_number"></block>
    <block type="math_arithmetic">
      <value name="A">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="B">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="math_single">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">9</field>
        </shadow>
      </value>
    </block>
    <block type="math_trig">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">45</field>
        </shadow>
      </value>
    </block>
    <block type="math_constant"></block>
    <block type="math_number_property">
      <value name="NUMBER_TO_CHECK">
        <shadow type="math_number">
          <field name="NUM">0</field>
        </shadow>
      </value>
    </block>
    <block type="math_change">
      <value name="DELTA">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="math_round">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">3.1</field>
        </shadow>
      </value>
    </block>
    <block type="math_on_list"></block>
    <block type="math_modulo">
      <value name="DIVIDEND">
        <shadow type="math_number">
          <field name="NUM">64</field>
        </shadow>
      </value>
      <value name="DIVISOR">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
    <block type="math_floor_division">
      <value name="DIVIDEND">
        <shadow type="math_number">
          <field name="NUM">64</field>
        </shadow>
      </value>
      <value name="DIVISOR">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
    <block type="math_constrain">
      <value name="VALUE">
        <shadow type="math_number">
          <field name="NUM">50</field>
        </shadow>
      </value>
      <value name="LOW">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="HIGH">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
    </block>
    <block type="math_random_int">
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
    </block>
    <block type="math_random_float"></block>
  </category>
  <category name="{catLists}" colour="10">
    <block type="lists_create_with">
      <mutation items="0"></mutation>
    </block>
    <block type="lists_create_with"></block>
    <block type="lists_repeat">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">5</field>
        </shadow>
      </value>
    </block>
    <block type="lists_length"></block>
    <block type="lists_isEmpty"></block>
    <block type="lists_indexOf">
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR">list</field>
        </block>
      </value>
    </block>
    <block type="lists_getIndex">
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR">{listVariable}</field>
        </block>
      </value>
    </block>
    <block type="lists_setIndex">
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR">{listVariable}</field>
        </block>
      </value>
    </block>
    <block type="lists_getSublist">
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR">{listVariable}</field>
        </block>
      </value>
    </block>
    <block type="lists_split">
      <value name="DELIM">
        <shadow type="text">
          <field name="TEXT">,</field>
        </shadow>
      </value>
    </block>
    <block type="lists_sort"></block>
  </category>
  <category name="{catText}" colour="50">
    <block type="text"></block>
    <block type="text_join"></block>
    <block type="text_append">
      <value name="TEXT">
        <shadow type="text"></shadow>
      </value>
    </block>
    <block type="text_repeat">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">5</field>
        </shadow>
      </value>
    </block>
    <block type="text_length">
      <value name="VALUE">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_isEmpty">
      <value name="VALUE">
        <shadow type="text">
          <field name="TEXT"></field>
        </shadow>
      </value>
    </block>
    <block type="text_indexOf">
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR">text</field>
        </block>
      </value>
      <value name="FIND">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_charAt">
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR">{textVariable}</field>
        </block>
      </value>
    </block>
    <block type="text_getSubstring">
      <value name="STRING">
        <block type="variables_get">
          <field name="VAR">{textVariable}</field>
        </block>
      </value>
    </block>
    <block type="text_changeCase">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_trim">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_print">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_comment">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_prompt_ext">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_chr">
      <value name="VALUE">
        <shadow type="math_number">
          <field name="NUM">65</field>
        </shadow>
      </value>
    </block>
    <block type="text_contains">
      <field name="OPTION">CONTAINS</field>
      <value name="TEXT">
        <block type="variables_get">
          <field name="VAR">besedilo</field>
        </block>
      </value>
    </block>
    <block type="text_check">
      <field name="CHECK">ISALPHA</field>
      <value name="TEXT">
        <block type="variables_get">
          <field name="VAR">besedilo</field>
        </block>
      </value>
    </block>
    <block type="text_replace">
      <value name="TEXT">
        <block type="variables_get">
          <field name="VAR">besedilo</field>
        </block>
      </value>
    </block>
  </category>
  <sep></sep>
  <category name="{catVariables}" colour="280" custom="VARIABLE"></category>
  <category name="{catFunctions}" colour="120" custom="PROCEDURE"></category>
  <sep></sep>
  <category name="{catTurtle}" colour="30">
    <block type="turtle_width">
      <value name="WIDTH">
        <shadow type="math_number">
          <field name="NUM">2</field>
        </shadow>
      </value>
    </block>
    <block type="turtle_pen">
      <field name="PEN">DOWN</field>
    </block>
    <block type="turtle_show">
      <field name="VISIBLE">SHOW</field>
    </block>
    <block type="turtle_shape">
      <field name="SHAPE">CLASSIC</field>
    </block>
    <block type="turtle_setpos">
      <field name="POSX">0</field>
      <field name="POSY">0</field>
    </block>
    <block type="turtle_color">
      <field name="COLOR">#000000</field>
    </block>
    <block type="turtle_bgcolor">
      <field name="COLOR">#ffcc66</field>
    </block>
    <block type="turtle_circle">
      <value name="RADIUS">
        <shadow type="math_number">
          <field name="NUM">20</field>
        </shadow>
      </value>
    </block>
    <block type="turtle_arc">
      <field name="RADIUS">20</field>
      <field name="ANGLE">90</field>
    </block>
    <block type="turtle_pos"></block>
    <block type="turtle_isdown"></block>
    <block type="turtle_reset"></block>
  </category>
  <category name="Dejanja" colour="190">
    <block type="actions_forward"></block>
    <block type="actions_backward"></block>
    <block type="actions_upward"></block>
    <block type="actions_downward"></block>
    <block type="actions_move">
      <field name="DIR">FORWARD</field>
      <value name="VALUE">
        <shadow type="math_number">
          <field name="NUM">30</field>
        </shadow>
      </value>
    </block>
    <block type="actions_jump">
      <field name="DIR">FORWARD</field>
      <value name="VALUE">
        <shadow type="math_number">
          <field name="NUM">30</field>
        </shadow>
      </value>
    </block>
    <block type="actions_leftright">
      <field name="DIR">LEFT</field>
    </block>
    <block type="actions_turn">
      <field name="DIR">LEFT</field>
      <value name="ANGLE">
        <shadow type="math_number">
          <field name="NUM">45</field>
        </shadow>
      </value>
    </block>
    <block type="actions_strawberry"></block>
  </category>
</xml>
<!-- Content end -->
					</div>
				</div>
			</div>

		</div>
		<!-- /#page-content-wrapper -->

	</div>
	<!-- /#wrapper -->

	<!-- jQuery -->
	<script src="js/jquery.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.min.js"></script>

<!-- Blockly -->
<script src="blockly/storage.js"></script>
<script src="blockly/blockly_compressed.js"></script>
<script src="blockly/blocks_compressed.js"></script>
<script src="blockly/javascript_compressed.js"></script>
<script src="blockly/python_compressed.js"></script>
<script src="blockly/local/custom_blocks.js"></script>
<script src="blockly/local/turtle_blocks.js"></script>
<script src="blockly/local/action_blocks.js"></script>
<script src="editor.js"></script>
<script>
  var elementID = "";
  $("#runButton").click(function() {
    elementID = "#output";
  });

  window.alert = function(msg) {
    $(elementID).append(msg + "\n");
  };

  $("#saveButton").click(function() {
    var title = prompt("Vnesi ime programa:", "program");
    var workspace = Blockly.getMainWorkspace();
    if (workspace != null) {
      var xml = Blockly.Xml.workspaceToDom(workspace);
      var data = Blockly.Xml.domToText(xml);
      // TODO: fix browserify so that this call works
      // saveToFile('program.blockly', xml);
      var blob = new Blob([data], {type: 'text/xml'});
      var filename = title + '.blockly';
      if (window.navigator.msSaveOrOpenBlob) {
        window.navigator.msSaveBlob(blob, filename);
      }
      else {
        var elem = window.document.createElement('a');
        elem.href = window.URL.createObjectURL(blob);
        elem.download = filename;
        document.body.appendChild(elem);
        elem.click();
        document.body.removeChild(elem);
        window.URL.revokeObjectURL(blob);
      }
    }
  });

  function uploadBlocklyWorkspace(event) {
    var file = event.target.files[0];
    var reader = new FileReader();
    reader.onload = function(e) {
      var xmlText = reader.result;
      var workspace = Blockly.getMainWorkspace();
      if (workspace != null) {
        workspace.clear();
        var xml = Blockly.Xml.textToDom(xmlText);
        // NOTE: documentation at https://developers.google.com/blockly/guides/get-started/web
        // is wrong! The parameters for domToWorkspace() should be workspace, then xml.
        Blockly.Xml.domToWorkspace(workspace, xml);
      }
    };
    reader.readAsText(file);
  }
  document.getElementById("loadButton").addEventListener("change", uploadBlocklyWorkspace, false);

</script>


</body>
</html>
